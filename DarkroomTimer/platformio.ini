[platformio]
lib_dir=src/lib

[env:nanoatmega328]
platform = atmelavr
framework = arduino
board = nanoatmega328
upload_speed = 115200
lib_deps =
    GyverLibs/EncButton @ ^3.7.0
    arduino-libraries/LiquidCrystal @ ^1.0.7
    bakercp/CRC32 @ ^2.0.0
build_flags =
    -Wno-switch
    -Werror
    -Wno-error=deprecated-declarations
build_src_filter=
    -<"**">
    +<main.cpp>

# testing
test_framework = unity
platform_packages =
    platformio/tool-simavr
test_speed = 9600
test_testing_command =
    timeout
    --preserve-status
    -s
    INT
    4
    ${platformio.packages_dir}/tool-simavr/bin/simavr
    -m
    atmega328p
    -f
    16000000L
    ${platformio.build_dir}/${this.__env__}/firmware.elf
